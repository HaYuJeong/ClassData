"use strict";(self["webpackChunkfronted_vue"]=self["webpackChunkfronted_vue"]||[]).push([[609],{4833:function(e,t,l){var r=l(5398);class s{getAll(e,t,l){return r.A.get(`/shop/simple-cart?title=${e}&page=${t}&size=${l}`)}create(e){return r.A.post("/shop/simple-cart",e)}remove(e){return r.A.delete(`/shop/simple-cart/deletion/${e}`)}}t.A=new s},7737:function(e,t,l){var r=l(5398);class s{create(e){return r.A.post("/shop/simple-order",e)}get(e){return r.A.get(`/shop/simple-order/${e}`)}}t.A=new s},8609:function(e,t,l){l.r(t),l.d(t,{default:function(){return E}});var r=l(6768),s=l(5130),o=l(4232);const a={class:"row mb-5 justify-content-center"},i={class:"col-12 w-50 input-group mb-3"},n={class:"input-group-append"},c={class:"col-12 w-25 mb-3"},d=["value"],u={class:"row"},p={class:"row g-0 p-3"},v={class:"col-md-4 p-3 border"},m=["src"],g={class:"col-md-8"},h={class:"card-body"},k={class:"card-title"},y={class:"card-title"},b={class:"card-title"},L={class:"col-12 mx-auto"},A={class:"row g-3 align-items-center mb-3"},C=(0,r.Lk)("div",{class:"col-3"},[(0,r.Lk)("label",{htmlFor:"deliveryAddr",class:"col-form-label"}," 배송주소 ")],-1),f={class:"col-9"},w={class:"row g-3 align-items-center mb-3"},S=(0,r.Lk)("div",{class:"col-3"},[(0,r.Lk)("label",{htmlFor:"deliveryMsg",class:"col-form-label"}," 배송 메세지 ")],-1),$={class:"col-9"},z={class:"row d-flex justify-content-end"};function M(e,t,l,M,V,F){const P=(0,r.g2)("b-pagination");return(0,r.uX)(),(0,r.CE)("div",null,[(0,r.Lk)("div",a,[(0,r.Lk)("div",i,[(0,r.bo)((0,r.Lk)("input",{type:"text",class:"form-control",placeholder:"제목검색","onUpdate:modelValue":t[0]||(t[0]=e=>V.searchTitle=e)},null,512),[[s.Jo,V.searchTitle]]),(0,r.Lk)("div",n,[(0,r.Lk)("button",{class:"btn btn-outline-secondary",type:"button",onClick:t[1]||(t[1]=(...t)=>e.retrieveSimpleCart&&e.retrieveSimpleCart(...t))}," 검색 ")])])]),(0,r.Lk)("div",c,[(0,r.eW)(" 1페이지당 개수 : "),(0,r.bo)((0,r.Lk)("select",{class:"form-select form-select-sm","onUpdate:modelValue":t[2]||(t[2]=e=>V.pageSize=e),onChange:t[3]||(t[3]=(...e)=>F.pageSizeChange&&F.pageSizeChange(...e))},[((0,r.uX)(!0),(0,r.CE)(r.FK,null,(0,r.pI)(V.pageSizes,((e,t)=>((0,r.uX)(),(0,r.CE)("option",{key:t,value:e},(0,o.v_)(e),9,d)))),128))],544),[[s.u1,V.pageSize]])]),(0,r.bF)(P,{class:"col-12 mb-3",modelValue:V.page,"onUpdate:modelValue":t[4]||(t[4]=e=>V.page=e),"total-rows":V.count,"per-page":V.pageSize,onClick:e.retrieveSimpleCart},null,8,["modelValue","total-rows","per-page","onClick"]),(0,r.Lk)("div",u,[((0,r.uX)(!0),(0,r.CE)(r.FK,null,(0,r.pI)(V.simpleCart,((e,t)=>((0,r.uX)(),(0,r.CE)("div",{class:"card mb-3",key:t},[(0,r.Lk)("div",p,[(0,r.Lk)("div",v,[(0,r.Lk)("img",{src:e.imgPath,class:"img-fluid rounded-start",alt:"...",style:{"{ height":"15 + 'vh', width: 5 + 'vw' }"}},null,8,m)]),(0,r.Lk)("div",g,[(0,r.Lk)("div",h,[(0,r.Lk)("h5",k,"상품 : "+(0,o.v_)(e.title),1),(0,r.Lk)("h5",y,"상품 가격 : "+(0,o.v_)(e.unitPrice),1),(0,r.Lk)("h5",b,"상품 개수 : "+(0,o.v_)(e.cartCount),1)])])])])))),128))]),(0,r.Lk)("div",L,[(0,r.Lk)("div",A,[C,(0,r.Lk)("div",f,[(0,r.bo)((0,r.Lk)("input",{type:"text",id:"deliveryAddr",required:"",class:"form-control",placeholder:"배송지 주소",name:"deliveryAddr","onUpdate:modelValue":t[5]||(t[5]=e=>V.deliveryAddr=e)},null,512),[[s.Jo,V.deliveryAddr]])])]),(0,r.Lk)("div",w,[S,(0,r.Lk)("div",$,[(0,r.bo)((0,r.Lk)("input",{type:"text",id:"deliveryMsg",required:"",class:"form-control",placeholder:"배송 메세지",name:"deliveryMsg","onUpdate:modelValue":t[6]||(t[6]=e=>V.deliveryMsg=e)},null,512),[[s.Jo,V.deliveryMsg]])])])]),(0,r.Lk)("div",z,[(0,r.Lk)("button",{type:"button",class:"btn btn-danger w-25 me-3",onClick:t[7]||(t[7]=(...e)=>F.cancelOrder&&F.cancelOrder(...e))}," 주문 취소 "),(0,r.Lk)("button",{type:"button",class:"btn btn-warning w-25",onClick:t[8]||(t[8]=(...e)=>F.goApproval&&F.goApproval(...e))}," 결제 ")])])}l(4114);var V=l(7737),F=l(4833),P={data(){return{simpleCart:[],searchTitle:"",deliveryAmount:3e3,deliveryAddr:"",deliveryMsg:"",page:1,count:0,pageSize:3,pageSizes:[3,6,9]}},methods:{async retrieveSimpleProduct(){try{let e=await F.A.getAll(this.searchTitle,this.page-1,this.pageSize);const{simpleCart:t,totalItems:l}=e.data;this.simpleCart=t,this.count=l,console.log(e.data)}catch(e){console.log(e)}},async goApproval(){if(this.deliveryAddr&&this.deliveryMsg){let t=new Date,l=`${t.getFullYear()}-${t.getMonth()}-${t.getDate()} ${t.getHours()}:${t.getMinutes()}:${t.getSeconds()}`,r=this.simpleCart.map((e=>e.unitPrice*e.cartCount)).reduce(((e,t)=>e+t)),s={sono:null,spno:0,productCount:0},o=[];for(const e of this.simpleCart)s.spno=e.spno,s.productCount=e.cartCount,o.push(s);try{let e={simpleOrderDetailList:o,orderDate:l,orderStatus:50001,productAmount:r,deliveryAmount:this.deliveryAmount,orderAmount:r+this.deliveryAmount,deliveryAddr:this.deliveryAddr,deliveryMsg:this.deliveryMsg},t=await V.A.create(e);console.log(t.data),this.$router.push("/simple-approval/"+t.data.sono)}catch(e){console.log(e)}}else alert("배송주소와 배송메세지를 입력하세요.")},cancelOrder(){this.$router.push("/simple-cart")},pageSizeChange(){this.page=1,this.retrieveSimpleProduct()}},mounted(){this.retrieveSimpleProduct()}},_=l(1241);const x=(0,_.A)(P,[["render",M]]);var E=x}}]);
//# sourceMappingURL=609.24fca98e.js.map